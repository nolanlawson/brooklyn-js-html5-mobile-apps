<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Mobile HTM5 apps that can compete with native</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<link rel="stylesheet" href="index.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>
		
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>Mobile HTM5 apps that can compete with native</h2>
					<h4>Nolan Lawson</h4>
          <aside class="notes">
            Hi, I'm Nolan Lawson. I work for Squarespace doing
            Android and mobile web, and in my spare time I
            help maintain PouchDB, a JavaScript database.
          </aside>
				</section>

        <section>
          <h4>HTC Magic, 2009</h4>
          <img src="img/htc_magic.jpg" height=600 alt="htc magic"/>
          <aside class="notes">
            I've been doing Android development for awhile.
            This was my first smartphone, and I thought it was pretty
            awesome back then.
          </aside>
        </section>
        
        <section>
          <img src="img/android_apps.png" height=640 alt="my android apps"/>
          <aside class="notes">
            I've written a lot of Android apps. But the problem with
            all these apps is that they're written in Java, so they only
            run on Android. Java used to hold the promise of being the
            "write once, run everywhere" platform, but nowadays that
            mantle has mostly passed to JavaScript.
          </aside>
        </section>

        <section>
          <div class="center-flex fancy-fragments">
            <div  class="emphasis">
              <img src="img/web_tech.svg" width=100 alt="html, css, and js"/>
            </div>
            <div class="no-emphasis">
              <span style="white-space: pre;"> &#8594; </span>
            </div>
            <div class="emphasis">
              <div class="horizontal-flex">
                <div>
                  <img src="img/cordova.png" height=50 alt="cordova">
                </div>
                <div>
                  <img src="img/phonegap.png" height=50 alt="phonegap">
                </div>
              </div>
            </div>
            <div class="no-emphasis">
              <span style="white-space: pre;"> &#8594; </span>
            </div>
            <div class="emphasis">
              <ul>
                <li>Android</li>
                <li>iOS</li>
                <li>Windows Phone</li>
                <li>BlackBerry</li>
                <li>Firefox OS</li>
                <li>Web</li>
              </ul>
            </div>
          </div>
          <aside class="notes">
            So nowadays, this dream I've been tinkering with for awhile
            is that I could write an app once, using HTML, CSS, and JavaScript,
            and then deploy it to a variety of mobile and even desktop platforms.
            Today this is 100% possible with tools like Cordova n√©e PhoneGap,
            Node-Webkit, and Atom Shell.
          </aside>
        </section>

        <section>
          <img src="img/zuck.png" alt="mark zuckerburg says the mobile web ain't ready"/>
          <aside class="notes">
            But the problem has always been performance. The conventional wisdom
            nowadays is that you just can't get native-level performance from
            web technologies. Facebook famously migrated their apps from HTML5
            to native, Twitter followed suit, and many other apps became thick clients
            or dropped the web altogether.
          </aside>
        </section>

        <section>
          <h4>Nexus 6, 2014</h4>
          <img src="img/nexus6.jpg" height=600 alt="nexus 6"/>
          <aside class="notes">
            But you know, it's 2015, and phones have gotten a lot more
            powerful since my HTC Magic's heydey. So I think we can revise
            these assumptions, and give HTML5 a second chance. I think that in 2015
            you can achieve native-level performance for most apps you want to write,
            but you have to know the tricks in order to do it.
          </aside>
        </section>

        <section>
          <ul>
            <li>Animations</li>
            <li>Network</li>
            <li>Android</li>
            <li>Frameworks</li>
          </ul>
          <aside class="notes">
            I'm going to talk about 4 main tricks.
          </aside>
        </section>

        <section>
          <h2>Animations smooth as <img class="inline-img" src="img/butter.png" alt="butter"></img></h2>
        </section>
        
        <section>
          <div class="center-flex">
            <div class="emphasis horizontal-flex">
              <div>
                JavaScript animations
              </div>
              <div>
                <img src="img/tortoise.jpg" height=200 alt="tortoise">
              </div>
            </div>
            <div class="emphasis horizontal-flex">
              <div>
                Normal CSS animations
              </div>
              <div>
                <img src="img/hare.jpg" height=200 alt="hare">
              </div>
            </div>
            <div class="emphasis horizontal-flex">
              <div>
                Hardware-accelerated CSS animations
              </div>
              <div>
                <img src="img/cheetah.png" height=200 alt="cheetah">
              </div>
            </div>
          </div>
        </section>

				<section>
					<table style="margin: 0 auto;">
						<tr>
							<td>
								<div class="demo-label">
									<code>translate3d</code>
								</div>

							</td>
							<td>
								<div class="demo translate3d-demo">
									<div class="ball"></div>
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<div class="demo-label">
									<code>scale3d</code>
								</div>

							</td>
							<td>
								<div class="demo scale3d-demo">
									<div class="ball"></div>
								</div>
							</td>
						</tr>
						</tr>
            <tr>
              <td>
                <div class="demo-label">
                  <code>rotate3d</code>
                </div>
              </td>
              <td>
                <div class="demo rotate3d-demo">
                  <div class="square"></div>
                </div>
              </td>
            </tr>
						<tr>
							<td>
								<div class="demo-label">
									<code>opacity</code>
								</div>
							</td>
							<td>
								<div class="demo opacity-demo">
									<div class="ball"></div>
								</div>
							</td>
						</tr>
					</table>
				</section>
				        
        <section>
          <ul>
            <li>Don't use <code>translateZ(0)</code></li>
            <li>Use <code>-webkit</code> prefixes</li>
            <li><code>will-change</code> will fix this someday</li>
          </ul>
        </section>

        <section>
          <div>
            <video data-autoplay src="vid/snakes.webm" loop></video>
          </div>
        </section>

        <section>
            <h2>Offline-first</h2>
        </section>
        
        <section>
          <div>pouchdb-lru-cache</div>
          <div>+</div>
          <div>blob-util</div>
          <div>=</div>
          <div>easy offline images</div>
        </section>
        
        <section>
          <pre><code data-trim contenteditable>
var db = new PouchDB('my-images');
db.initLru(5000000); // store 5 MB max

function getImageSrc(src) {
  return db.lru.get(src).then(function (blob) {
    return blobUtil.createObjectURL(blob); // cached
  }).catch(function () { // not cached
    return blobUtil.imgSrcToBlob(src).then(function (blob) {
      return db.put(src, blob); // cache it
    }).then(function () {
      return src;
    });
  });
}
          </code></pre>
        </section>

        <section>
            <h2>Use Crosswalk on Android</h2>
        </section>

        <section>
          <img src="img/html5test.png" alt="html5 test logo"/>
          <table class="nice-table">
            <tr>
              <th>Android</th>
              <td>4.0</td>
              <td>4.2</td>
              <td>4.3</td>
              <td>4.4</td>
              <td>5.0</td>
            </tr>

            <tr>
              <th>Score</th>
              <td><strong>272</strong></td>
              <td><strong>278</strong></td>
              <td><strong>384</strong></td>
              <td><strong>428</strong></td>
              <td><strong>xxx</strong></td>
            </tr>

            <tr>
              <th>Coverage</th>
              <td>6.7%</td>
              <td>39.5%</td>
              <td>6.5%</td>
              <td>39.1%</td>
              <td><0.1%</td>
            </tr>

          </table>
          <div>
            <small class="text-muted">
              Source: <a href="https://developer.android.com/about/dashboards/index.html">Android dashboards</a>,
              fetched on 9 January 2015.
            </small>
          </div>
        </section>

        <section>
          <div class="video-compare">
            <div>
              <video data-autoplay height=680 src="vid/slow-without-crosswalk.webm" loop></video>
            </div>
            <div>
              <video data-autoplay height=680 src="vid/fast-with-crosswalk.webm" loop></video>
            </div>
          </div>
          <div class="footer">Android 4.4.4 WebView (left, Chromium v33) vs. Chrosswalk (right, Chromium v38)</div>
        </section>

        <section>
            <h2>Pick your frameworks carefully</h2>
        </section>
        
        <section>
          <div>
            <img src="img/framework_authors.png" alt="tweet, Looking fwd to js framework authors getting smartphones and trying their stuff out on em someday."/>
          </div>
        </section>

        <section>
          <h3>Mobile-optimized frameworks</h3>
          <div class="flex">
            <div><img src="img/framework_ionic.jpg" height=300 alt="ionic framework"/></div>
            <div><img src="img/framework_famous.jpg" height=300 alt="famous framework"/></div>
            <div><img src="img/framework_appgyver.jpg" height=300 alt="appgyver framework"/></div>
          </div>
        </section>


        <section>
          <div class="video-compare">
            <div>
              <video data-autoplay src="vid/fast-ionic.webm" loop></video>
            </div>
            <div>
              <video data-autoplay src="vid/slow-ionic.webm" loop></video>
            </div>
          </div>
          <div class="footer">
            Ionic <code>collection-repeat</code> (left) vs. Angular <code>ng-repeat</code> (right)
          </div>
        </section>
				
				<section>
				  <h2>Sources</h2>
				  <ul class="sources">
				    <li>
				      <a href="https://dev.opera.com/articles/css-will-change-property/">
				        Everything You Need to Know About the CSS will-change Property
				      </a>
				    </li>
				    <li>
				      <a href="https://www.youtube.com/watch?v=h2djIdAFc5U">
				        Mobile Web Thursdays: Performance on Mobile (video)
				      </a>
				    </li>
				    <li>
				      <a href="https://www.youtube.com/watch?v=Il4swGfTOSM">
				        Breaking the 1000ms Time to Glass Mobile Barrier (video)
				      </a>
				    </li>
				    <li>
				      <a href="http://ionicframework.com/blog/collection-repeat/">
				        Ionic: Collection Repeat
				      </a>
				    </li>
				  </ul>
				</section>
				
				<section>
				  <h2>Tools</h2>
				  <ul class="sources">
				    <li>
				      <a href="https://crosswalk-project.org/">
				        Crosswalk
				      </a>
				    </li>
				    <li>
				      <a href="https://github.com/nolanlawson/blob-util">
				        blob-util
				      </a>
				    </li>
				    <li>
				      <a href="https://github.com/squarespace/pouchdb-lru-cache">
				        pouchdb-lru-cache
				      </a>
				    </li>
				  </ul>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
        fragments: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});

      Reveal.addEventListener( 'slidechanged', function( event ) {
        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
        var notes = event.currentSlide.querySelector(".notes");
        if(notes) {
          console.info(notes.innerHTML.replace(/\n\s+/g,'\n'));
        }
      } );

    </script>

	</body>
</html>
